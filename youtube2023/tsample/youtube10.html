
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나만의 유튜브 사이트 만들기 😇</title>

    <link rel="stylesheet" href="../../assets/css/fonts.css">
    <link rel="stylesheet" href="../../assets/css/reset.css">
    <link rel="stylesheet" href="../../assets/css/webs.css">

    <link rel="shortcut icon" href="../../assets/ico/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="../../assets/ico/favicon.png">
    <link rel="icon" href="../../assets/ico/favicon.png">
    <link rel="icon" href="../../assets/ico/favicon.png" sizes="48x48">
    <link rel="icon" href="../../assets/ico/favicon.png" sizes="64x64">
    <link rel="icon" href="../../assets/ico/favicon.png" sizes="128x128">

    <meta name="acthor" content="웹스토리보이">
    <meta name="description" content="한가지 사이트를 다양한 프레임워크를 통해 만들어 보는 포트폴리오 사이트입니다.">
    <meta name="keywords" content="포트폴리오, portfolio, 리액트, react.js, 뷰, vue.js, 넥스트, next.js, 웹스토리보이, webstoryboy">
    <meta name="robots" content="all">
</head>
<body>

    <div id="skip">
        <a href="#header">헤더 영역 바로가기</a>
        <a href="#main">컨텐츠 영역 바로가기</a>
        <a href="#footer">푸터 영역 바로가기</a>
    </div>
    <!-- //skip -->

    <header id="header">
        <div class="header__inner">
            <div class="left"> 
                <a href="../index.html" class="star"><span class="ir">메인으로</span></a>
            </div>
            <h1>
                <a href="../index.html">WEBSTORYBOY</a>
            </h1>
            <div class="right">
                <ul>
                    <li><a href="#">검색</a></li>
                </ul>
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="#"><span>레퍼런스</span></a></li>
                    <li><a href="#"><span>튜토리얼</span></a></li>
                    <li><a href="#"><span>게시판</span></a></li>
                    <li><a href="#"><span>블로그</span></a></li>
                </ul>
            </nav>
        </div>
    </header>
    <!-- //header -->

    <main id="main">
        <section id="blog" class="nanumSquareNeo">
            <div class="blog__title">
                <span class="cate">Tutorial/Portfolio</span>
                <h1 class="title">나만의 유튜브 사이트 만들기</h1>
                <div class="meta">
                    <span class="author">by @webs</span>
                    <span class="date">2023. 09. 01.</span>
                </div>
            </div>
            <div class="blog__inner container">
                <div id="youtube" class="blog__contents__intro">
                    <div class="desc">
                        <div class="left">
                            <span class="num">10</span>
                            <div class="title">나만의 유튜브 사이트 만들기 : 서치 페이지 만들기</div>
                            <span class="difficulty">난이도 <span>중간</span></span>
                        </div>
                        <div class="right">
                            <div class="btn">소스 다운로드</div>
                            <a href="https://youtube2023.netlify.app" target="_blank" class="sampleBtn">완성 화면</a>
                            <a href="https://github.com/webstoryboy/youtube2023" target="_blank" class="sampleBtn">완성 코드</a>
                            <a href="#" target="_blank" class="sampleBtn">영상 보기</a>
                        </div>
                    </div>
                </div>
                <!-- //blog__contents__intro -->

                <div class="blog__contents tutorial">
                    <h2>소개</h2>
                    <p>
                        안녕하세요! 웹스토리보이입니다.
                        이번에는 메인페이지의 메인 컨텐츠를 만들어 보겠습니다. 
                        메인에는 오늘의 추천영상, 개발자 소개 및 영상 소개를 보여주는 부분입니다. 
                        그럼 한번 시작해보겠습니다.😝
                    </p>

                    <h3>인덱스</h3>
                    <div class="index2">
                        <div>
                            <ul>
                                <li>1. 셋팅하기
                                    <ul>
                                        <li>1_1. Node.js 설치</li>
                                        <li>1_2. Vscode 설치</li>
                                        <li>1_3. React.js 설치</li>
                                        <li>1_4. 폴더 정리하기</li>
                                        <li>1_5. 필요한 파일 설치하기</li>
                                    </ul>
                                </li>
                                <li>2. CSS 셋팅하기
                                    <ul>
                                        <li>2_1. SCSS 설정하기</li>
                                        <li>2_2. style.scss 설정하기</li>
                                        <li>2_3. fonts.scss 설정하기</li>
                                        <li>2_4. vars.scss 설정하기</li>
                                        <li>2_5. reset.scss 설정하기</li>
                                        <li>2_6. mixin.scss 설정하기</li>
                                        <li>2_7. common.scss 설정하기</li>
                                    </ul>
                                </li>
                                <li>3. 페이지 및 컴퍼넌트 만들기
                                    <ul>
                                        <li>3_1. 페이지 만들기</li>
                                        <li>3_2. 컴퍼넌트 만들기</li>
                                    </ul>
                                </li>
                                <li>4. 섹션 컴퍼넌트 만들기
                                    <ul>
                                        <li>4_1. Main 컨퍼넌트 만들기</li>
                                        <li>4_2. Header 컨퍼넌트 만들기</li>
                                        <li>4_3. Header 컨퍼넌트 데이터화 하기</li>
                                        <li>4_4. Footer 컨퍼넌트 만들기</li>
                                    </ul>
                                </li>
                                <li>5. 페이지 SEO 작업 
                                    <ul>
                                        <li>5_1. App.js 재구성</li>
                                        <li>5_2. main 컴퍼넌트 재구성</li>
                                        <li>5_3. 모든 페이지 재구성</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <ul>
                                <li>6. 메인 콘텐츠 만들기
                                    <ul>
                                        <li>6_1. 검색 컴퍼넌트 작업</li>
                                        <li>6_2. 오늘의 영상 컴퍼넌트 작업</li>
                                        <li>6_3. 오늘의 영상 페이지 작업</li>
                                    </ul>
                                </li>
                                <li>7. 추천 개발자 콘텐츠 만들기
                                    <ul>
                                        <li>7_1. 메인 추천 개발자 섹션 작업</li>
                                        <li>7_2. 추천 개발자 페이지 작업</li>    
                                        <li>7_3. 추천 개발자 섹션 슬라이드 작업</li>    
                                    </ul>
                                </li>
                                <li>8. 나머지 페이지 콘텐츠 만들기
                                    <ul>
                                        <li>8_1. 나머지 페이지 작업</li>  
                                        <li>8_2. VideoSlide 컴퍼넌트 작업</li>  
                                        <li>8_3. 페이지 간소화하기</li>  
                                        <li>8_4. 이미지 슬라이드 작업하기</li>  
                                        <li>8_5. 각 페이지 데이터 로드 작업</li>  
                                    </ul>
                                </li>
                                <li>9. 페이지 로딩 작업 만들기
                                    <ul>
                                        <li>9_1. 페이지 로딩 작업 만들기</li>  
                                        <li>9_2. scrollTo 만들기</li>  
                                    </ul>
                                </li>
                                <li>10. 서치 페이지 만들기
                                    <ul>
                                        <li>10_1. 검색 영역 설정하기</li>  
                                        <li>10_2. 유튜브 API 설정하기</li>  
                                        <li>10_3. 유튜브 API 데이터 가져오기</li>  
                                        <li>10_4. Rapid API 설정하기</li>  
                                        <li>10_5. Rapid API 데이터 가져오기</li>  
                                        <li>10_6. 검색 데이터 더보기 기능 설정하기</li>  
                                        <li>10_7. Loading 소스 설정하기</li>  
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                    

                    <h3>10. 서치 페이지 만들기</h3>
                    <div>
                        <h4>10_1. 검색 영역 설정하기</h4>
                        <p>
                            <code>App.js</code>에 검색 페이지를 설정한 적이 있습니다. 
                            search 키워드 뒤에 문자열이 오면 ID로 인식합니다. 
                            우선 검색 input 박스부터 설정을 하겠습니다. 
                        </p>
                        <p>
                            우선 <code>components</code> 폴더 <code>contents</code> 폴더 <code>section</code> 폴더에 <code>search.jsx</code> 파일을 수정하겠습니다.
                        </p>
<pre><code class="language-js">import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom'

const Search = () =&gt; {
    const [searchKeyword, setSearchKeyword] = useState('');
    const navigate = useNavigate();

    const handleSearch = () =&gt; {
        console.log(searchKeyword)
        if (searchKeyword) {
            navigate(`/search/${searchKeyword}`);
            setSearchKeyword('');
        }
    };

    return (
        &lt;div id='search'&gt;
            &lt;div className='search__inner'&gt;
                &lt;label htmlFor='searchInput'&gt;
                    &lt;span className='ir'&gt;검색&lt;/span&gt;
                &lt;/label&gt;
                &lt;input 
                    type='search' 
                    id='searchInput' 
                    placeholder='검색어를 입력해주세요' 
                    autoComplete='off' 
                    className='search__input' 
                    onChange={e =&gt; setSearchKeyword(e.target.value)}
                    onKeyDown={e =&gt; {
                        if (e.key === 'Enter') {
                            handleSearch();
                        }
                    }}
                /&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    )
}

export default Search</code></pre>
                        
                        <div class="sampleBasic">
                            <ul class="list">
                                <li>useState를 사용하여 searchKeyword라는 상태 변수를 생성하고 초기값을 빈 문자열로 설정합니다. 이 변수는 사용자가 입력한 검색어를 저장합니다.</li>
                                <li>useNavigate 훅을 사용하여 navigate 함수를 가져옵니다. 이 함수는 React Router의 내비게이션을 처리하는데 사용됩니다.</li>
                                <li>handleSearch 함수는 검색 버튼을 클릭하거나 Enter 키를 눌렀을 때 호출됩니다. 먼저, 현재 검색어를 콘솔에 출력합니다(console.log(searchKeyword)). 그런 다음, 검색어가 비어 있지 않은 경우에만 내비게이션을 수행하고 검색어를 초기화합니다.</li>
                                <li>JSX에서는 검색 UI를 렌더링합니다. &lt;input&gt; 엘리먼트를 통해 검색어를 입력할 수 있으며, onChange 이벤트 핸들러를 사용하여 입력된 검색어를 searchKeyword 상태에 업데이트합니다. 또한, Enter 키를 눌렀을 때 검색을 실행하도록 onKeyDown 이벤트 핸들러를 설정합니다.</li>
                                <li>label 엘리먼트는 스크린 리더 사용자를 위한 접근성을 향상시키기 위해 사용되며, 레이블에는 "검색" 아이콘이 포함됩니다.</li>
                                <li>검색 버튼을 클릭하거나 Enter 키를 누르면 handleSearch 함수가 호출되어 검색을 수행하고, 검색어는 초기화됩니다.</li>
                            </ul>
                        </div>

                    </div>

                    <div class="mt80">
                        <h4>10_2. 유튜브 API 설정하기</h4>
                        <p>
                            youtube api라고 검색을 하고 다음 페이지로 이동하겠습니다.
                            <a class="sampleLine" href="https://developers.google.com/youtube/v3?hl=ko" target="_blank">https://developers.google.com/youtube/v3?hl=ko</a> 여기로 이동합니다.
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube08.png" alt="youtube2023" />
                        </div>

                        <p>
                            Developer Console에 클릭합니다. 
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube09.png" alt="youtube2023" />
                        </div>

                        <p>
                            API 및 서비스 사용 설정 버튼을 클릭합니다.
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube10.png" alt="youtube2023" />
                        </div>

                        <p>
                            YOUTUBE Data API v3를 클릭합니다.
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube11.png" alt="youtube2023" />
                        </div>

                        <p>
                            사용해보기를 누르고 API 키를 받으면 됩니다. 
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube12.png" alt="youtube2023" />
                        </div>

                        <p>
                            사용자 인증 정보 탭을 클릭하고 인증 정보 만들기 버튼을 클릭합니다. 
                            이렇게 하면 API 키를 만들 수 있습니다. 
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube13.png" alt="youtube2023" />
                        </div>

                        <p>
                            <code>.env</code> 환경 변수 파일을 만듭니다. 
                            여기에 API 키를 보관하겠습니다. 이 키는 중요하기 때문에 함부로 공유하시면 됩니다. 
                            그렇기 때문에 깃에도 올라가면 안됩니다. 
                            <code>.gitignore</code> 파일에 .env 파일을 추가하여 올리는 것을 방지할 것입니다. 
                        </p>
                        <div class="sampleFolder">
                            <ul>
                                <li class="icon1">node_modules</li>
                                <li class="icon1">public</li>
                                <li class="icon1">src</li>
                                <li class="icon2 m0">.env</li>
                                <li class="icon2 m0">.gitignore</li>
                                <li class="icon2 m0">package-lock.josn</li>
                                <li class="icon2 m0">package.josn</li>
                                <li class="icon2 m0">README.md</li>
                            </ul>
                        </div>
                        <p>
                            .env 파일에는 다음과 같이 작업합니다.
                        </p>
<pre><code class="language-js">REACT_APP_YOUTUBE_API_KEY=여기에 Youtube API 키를 넣습니다.</code></pre>
                        <p>
                            .gitignore 파일에는 .env을 추가합니다.
                        </p>
<pre><code class="language-js"># See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# production
/build

# misc
.DS_Store
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*
</code></pre>
                    </div>
                    
                    <div class="mt80">
                        <h4>10_3. 유튜브 API 데이터 가져오기</h4>
                        <p>
                            유튜브 API를 통해 데이터를 불러오겠습니다. <code>pages</code> 폴더에 <code>Search.jsx</code> 파일을 수정하겠습니다.
                        </p>
<pre><code class="language-js">import React, { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import Main from '../components/section/Main'

import VideoSearch from '../components/videos/VideoSearch'

const Search = () =&gt; {
    const { searchId } = useParams();
    const [ videos, setVideos ] = useState([]);
    
    useEffect(() =&gt; {
        fetch(
            `https://youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=48&q=${searchId}&type=video&key=${process.env.REACT_APP_YOUTUBE_API_KEY}`,
        )
        .then(response =&gt; response.json())
        .then(result =&gt; {
            console.log(result);
            setVideos(result.items)
        })
        .catch(error =&gt; console.log(error));
        }, [searchId]);

    return (
        &lt;Main 
            title = "유투브 검색"
            description="유튜브 검색 결과 페이지입니다."&gt;
            
            &lt;section id='searchPage'&gt;
                &lt;div className="video__inner search"&gt;
                    &lt;VideoSearch videos={videos} /&gt;
                &lt;/div&gt;
            &lt;/section&gt;
        &lt;/Main&gt;
    )
}

export default Search</code></pre>
                        <div class="sampleBasic">
                            <ul class="list">
                                <li>useParams 훅을 사용하여 현재 경로에서 searchId 파라미터를 가져옵니다. 이 파라미터는 사용자가 입력한 검색어를 나타냅니다.</li>
                                <li>useState를 사용하여 videos라는 상태 변수를 생성하고 초기값을 빈 배열로 설정합니다. 이 변수는 검색 결과로 받아온 비디오 목록을 저장합니다.</li>
                                <li>useEffect 훅을 사용하여 컴포넌트가 마운트되거나 searchId가 변경될 때마다 유튜브 API를 호출하여 검색 결과를 가져옵니다. API 호출에는 fetch 함수를 사용하며, 검색어와 API 키를 쿼리 파라미터로 전달합니다. API 응답을 JSON으로 파싱하고, 결과를 setVideos 함수를 사용하여 videos 상태 변수에 저장합니다. API 호출 중에 발생할 수 있는 오류도 처리합니다.</li>
                                <li>JSX에서는 Main 컴포넌트를 사용하여 페이지의 제목과 설명을 설정합니다. 그리고 검색 결과를 표시하기 위해 VideoSearch 컴포넌트를 렌더링합니다. VideoSearch 컴포넌트에는 검색 결과로 받아온 비디오 목록이 전달됩니다.</li>
                            </ul>
                        </div>

                        <p>
                            <code>VideoSearch.jsx</code> 컴퍼넌트는 다음과 같이 작업합니다.
                        </p>
<pre><code class="language-js">import React from 'react'
import { Link } from 'react-router-dom'

const VideoSearch = ({ videos }) =&gt; {
    return (
        &lt;&gt;
            {videos.map((video, index) =&gt; (
                &lt;div className="video" key={index}&gt;
                    &lt;div className="video__thumb play__icon"&gt;
                        &lt;Link 
                            to={`/video/${video.id.videoId}`} 
                            style={{ backgroundImage: `url(${video.snippet.thumbnails.high.url})` }}&gt;
                        &lt;/Link&gt;
                    &lt;/div&gt;
                    &lt;div className="video__info"&gt;
                        &lt;div className="title"&gt;
                            &lt;Link to={`/video/${video.id.videoId}`}&gt;{video.snippet.title}&lt;/Link&gt;
                        &lt;/div&gt;
                        &lt;div className="info"&gt;
                            &lt;span className="author"&gt;
                                &lt;Link to={`/channel/${video.snippet.channelId}`}&gt;{video.snippet.channelTitle}&lt;/Link&gt;
                            &lt;/span&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            ))}
        &lt;/&gt;
    )
}

export default VideoSearch
</code></pre>


                        <p>
                            특별한 이상이 없다면 다음과 같이 화면이 구성되고 
                            카테고리 밑에 키워드를 누르면 페이지가 검색 영역이 완성됩니다.
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube14.png" alt="youtube2023" />
                        </div>
                    </div>

                    <div class="mt80">
                        <h4>10_4. Rapid API 설정하기</h4>
                        <p>
                            이번에는 Youtube API가 아닌 rapid에서 제공하는 API로 작업하겠습니다. 
                            Youtube API 작업하다보면 트래픽이나 사용제한으로 오래동안 사용 못할 수 있습니다. 
                            제한이 걸려 있기 때문에 만약을 위해서 Rapid API도 사용해보도록 하겠습니다. 
                            <a class="sampleLine" href="https://rapidapi.com/" target="_blank">https://rapidapi.com/</a> 여기에서 회원가입을 하고 youtube v3를 검색합니다.
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube15.png" alt="youtube2023" />
                        </div>

                        <p>
                            테스트도 바로 할 수 있으며,
                            axios를 선택하여 소스도 확인할 수 있습니다. 
                        </p>
                        <div class="sampleImg">
                            <img src="img/youtube16.png" alt="youtube2023" />
                        </div>
                    </div>

                    <div class="mt80">
                        <h4>10_5. Rapid API 데이터 가져오기</h4>
                        <p>
                            이번에는 axios를 통해 가져오겠습니다. 
                            파일을 <code>utils</code> 폴더에 <code>api.js</code> 파일을 만들어서 다음과 같이 작업하겠습니다.
                            만약 데이터가 불러오지 않는다면 <code>npm start</code>를 다시 한번해주세요!
                        </p>
<pre><code class="language-js">import axios from 'axios';

export const BASE_URL = 'https://youtube-v31.p.rapidapi.com';

const options = {
    params: {
        maxResults: 48,
    },
    headers: {
        'X-RapidAPI-Key': process.env.REACT_APP_RAPID_API_KEY,
        'X-RapidAPI-Host': 'youtube-v31.p.rapidapi.com',
    },
};

export const fetchFromAPI = async (url) => {
    const { data } = await axios.get(`${BASE_URL}/${url}`, options);
    console.log(data)
    return data;
};
</code></pre>
                        <p>
                            <code>pages</code> 폴더에 <code>Search.jsx</code> 페이지는 다음과 같이 수정하겠습니다. 
                        </p>
<pre><code class="language-js">import React, { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import Main from '../components/section/Main'

import VideoSearch from '../components/videos/VideoSearch'
import { fetchFromAPI } from '../utils/api'

const Search = () =&gt; {
    const { searchId } = useParams();
    const [ videos, setVideos ] = useState([]);
    
    useEffect(() =&gt; {
        fetchFromAPI(`search?part=snippet&q=${searchId}`)
            .then((data) =&gt; setVideos(data.items))
    }, [searchId]);

    return (
        &lt;Main 
            title = "유투브 검색"
            description="유튜브 검색 결과 페이지입니다."&gt;
            
            &lt;section id='searchPage'&gt;
                &lt;div className="video__inner search"&gt;
                    &lt;VideoSearch videos={videos} /&gt;
                &lt;/div&gt;
            &lt;/section&gt;
        &lt;/Main&gt;
    )
}

export default Search</code></pre>    

                        <p>
                            .env 파일에는 다음 파일을 추가하겠습니다.
                        </p>
<pre><code class="language-js">REACT_APP_RAPID_API_KEY=여기에 Rapid API 키를 넣습니다.</code></pre>
                    </div>

                    <div class="mt80">
                        <h4>10_6. 검색 데이터 더보기 기능 설정하기</h4>
                        <p>
                            검색 데이터가 많이 때문에 더 보기 버튼을 추가하여 버튼을 누르면 내용물을 더 보여주겠습니다.
                            <code>pages</code> 폴더에 <code>search.jsx</code> 페이지를 다시 수정하겠습니다. 
                        </p>
<pre><code class="language-js">import React, { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import Main from '../components/section/Main'

import VideoSearch from '../components/videos/VideoSearch'
import { fetchFromAPI } from '../utils/api'

const Search = () =&gt; {
    const { searchId } = useParams();
    const [ videos, setVideos ] = useState([]);
    const [ nextPageToken, setNextPageToken ] = useState(null);
    
    useEffect(() =&gt; {
        setVideos([]);
        fetchVideos(searchId);
    }, [searchId]);

    const fetchVideos = (query, pageToken = '') =&gt; {
        fetchFromAPI(`search?part=snippet&q=${query}&pageToken=${pageToken}`)
            .then((data) =&gt; {
                setNextPageToken(data.nextPageToken);
                setVideos((prevVideos) =&gt; [...prevVideos, ...data.items]);
            });
    };

    const handleLoadMore = () =&gt; {
        if (nextPageToken) {
            fetchVideos(searchId, nextPageToken);
        }
    };

    return (
        &lt;Main 
            title = "유투브 검색"
            description="유튜브 검색 결과 페이지입니다."&gt;
            
            &lt;section id='searchPage'&gt;
                &lt;div className="video__inner search"&gt;
                    &lt;VideoSearch videos={videos} /&gt;
                &lt;/div&gt;
                &lt;div className="video__more"&gt;
                    {nextPageToken && (
                        &lt;button onClick={handleLoadMore}&gt;더 보기&lt;/button&gt;
                    )}
                &lt;/div&gt;
            &lt;/section&gt;
        &lt;/Main&gt;
    )
}

export default Search

</code></pre>

                        <div class="sampleBasic">
                            <ul class="list">
                                <li>nextPageToken 상태 변수: nextPageToken은 다음 페이지의 토큰을 저장합니다. 이를 사용하여 API 호출 시 다음 페이지의 결과를 가져옵니다. 초기값은 null로 설정됩니다.</li>
                                <li>useEffect로 초기 검색 결과 초기화: 검색어(searchId)가 변경될 때마다 videos 상태와 nextPageToken 상태를 초기화합니다. 이렇게 함으로써 새로운 검색어로 검색 결과를 다시 불러옵니다.</li>
                                <li>fetchVideos 함수: 검색 결과를 가져오는 로직을 함수로 추상화합니다. 함수에는 query (검색어)와 pageToken (다음 페이지 토큰)을 인자로 받습니다.</li>
                                <li>handleLoadMore 함수: "더 보기" 버튼 클릭 시 호출되는 함수로, nextPageToken이 있을 때만 추가 데이터를 로드합니다.</li>
                                <li>JSX에서 "더 보기" 버튼 추가: 검색 결과 아래에 "더 보기" 버튼을 추가하고, nextPageToken이 존재할 때만 이 버튼을 렌더링합니다. 버튼을 클릭하면 handleLoadMore 함수가 실행되어 추가 데이터를 가져옵니다.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mt80">
                        <h4>10_7. Loading 소스 설정하기</h4>
                        <p>
                            기존 페이지처럼 로딩 소스를 추가하여 조금 더 부드럽게 작업하겠습니다. 
                            <code>pages</code> 폴더 <code>Search.jsx</code> 페이지를 다음과 같이 수정하겠습니다.
                        </p>
<pre><code class="language-js">import React, { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import Main from '../components/section/Main'

import VideoSearch from '../components/videos/VideoSearch'
import { fetchFromAPI } from '../utils/api'

const Search = () =&gt; {
    const { searchId } = useParams();
    const [ videos, setVideos ] = useState([]);
    const [ nextPageToken, setNextPageToken ] = useState(null);
    const [ loading, setLoading ] = useState(true); 
    
    useEffect(() =&gt; {
        setVideos([]);
        fetchVideos(searchId);
        setLoading(true);
    }, [searchId]);

    const fetchVideos = (query, pageToken = '') =&gt; {
        fetchFromAPI(`search?part=snippet&q=${query}&pageToken=${pageToken}`)
            .then((data) =&gt; {
                setNextPageToken(data.nextPageToken);
                setVideos((prevVideos) =&gt; [...prevVideos, ...data.items]);
                setLoading(false); // 데이터 로딩 완료
            })
            .catch((error) =&gt; {
                console.error('Error fetching data:', error);
                setLoading(false); // 데이터 로딩 실패
            });
    };

    const handleLoadMore = () =&gt; {
        if (nextPageToken) {
            setLoading(true);
            fetchVideos(searchId, nextPageToken);
        }
    };

    const searchPageClass = loading ? 'isLoading' : '';

    return (
        &lt;Main 
            title = "유투브 검색"
            description="유튜브 검색 결과 페이지입니다."&gt;
            
            &lt;section id='searchPage' className={searchPageClass}&gt;
                &lt;h2&gt;🤠 &lt;em&gt;{searchId}&lt;/em&gt; 검색 결과입니다.&lt;/h2&gt;
                &lt;div className="video__inner search"&gt;
                    &lt;VideoSearch videos={videos} /&gt;
                &lt;/div&gt;
                &lt;div className="video__more"&gt;
                    {nextPageToken && (
                        &lt;button onClick={handleLoadMore}&gt;더 보기&lt;/button&gt;
                    )}
                &lt;/div&gt;
            &lt;/section&gt;
        &lt;/Main&gt;
    )
}

export default Search
</code></pre>
                    </div>

                    <div>
                        <h3>마무리</h3>
                        <p>
                            이렇게 하여 검색페이지도 완성하였습니다. 
                        </p>
                    </div>

                    <hr>

                    <div class="right_refer">
                        <a href="https://port2023-react.netlify.app/" target="_blank" class="sampleBtn">완성 화면</a>
                        <a href="https://github.com/webstoryboy" target="_blank" class="sampleBtn">소스 보기</a>
                        <a href="https://www.youtube.com/playlist?list=PL4UVBBIc6giLabEb4ygOmKDWCnsSKq2uP" target="_blank" class="sampleBtn">영상 보기</a>
                    </div>

                    <h3>예제 목록</h3>
                    <div class="refer5_wrap">
                        <ul class="refer5">
                            <li><a href="https://webstoryboy.co.kr/1964">1. 나만의 유튜브 사이트 만들기 : 셋팅하기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1965">2. 나만의 유튜브 사이트 만들기 : CSS 셋팅하기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1966">3. 나만의 유튜브 사이트 만들기 : 페이지 및 컴퍼넌트 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1967">4. 나만의 유튜브 사이트 만들기 : 섹션 컴퍼넌트 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1968">5. 나만의 유튜브 사이트 만들기 : 페이지 SEO 작업</a></li>
                            <li><a href="https://webstoryboy.co.kr/1969">6. 나만의 유튜브 사이트 만들기 : 메인 콘텐츠 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1970">7. 나만의 유튜브 사이트 만들기 : 추천 개발자 콘텐츠 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1971">8. 나만의 유튜브 사이트 만들기 : 나머지 페이지 콘텐츠 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1972">9. 나만의 유튜브 사이트 만들기 : 페이지 로딩 작업 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1973">10. 나만의 유튜브 사이트 만들기 : 서치 페이지 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1974">11. 나만의 유튜브 사이트 만들기 : 비디오 페이지 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1975">12. 나만의 유튜브 사이트 만들기 : 채널 페이지 만들기</a></li>
                            <li><a href="https://webstoryboy.co.kr/1976">13. 나만의 유튜브 사이트 만들기 : 마무리 및 배포하기</a></li>
                        </ul>
                    </div>
                </div>
                <!-- //blog__contents -->

                <aside class="blog__aside">
                    <button class="blog__aside__btn"><span></span></button>
                    <div class="blog__aside__chapter">
                    </div>
                </aside>
            </div>
        </section>
        <!-- //blog -->
    </main>
    <!-- //main -->

    <footer id="footer">

    </footer>
    <!-- //footer -->

    <script src="../../assets/js/jquery-3.6.0.js"></script>
    <script src="../../assets/js/jquery-ui.js"></script>
    <script src="../../assets/js/highlight.min.js"></script>
    <script src="../../assets/js/webs.js"></script>
</body>
</html>

